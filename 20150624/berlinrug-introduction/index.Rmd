---
title       : 1. Meetup of the Berlin R Users Group
subtitle    : 2015-06-24 @ Microsoft Berlin Digital Eatery (Berlin, DE)
author      : Konstantin Greger
job         : 
logo        : Rlogo.png
biglogo     : Rlogo.png
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

## Schedule for today

Time|What's happening
-------|-------
19:00|doors open
19:30|Konstantin Greger ([@kogreger](https://twitter.com/kogreger)): "Welcome address and brief group introduction"
~19:45|Berry Boessenkool (Universit√§t Potsdam, [@berryboessenkoo](https://twitter.com/berryboessenkoo)): "Why you need an umbrella on hot days - R application in hydrometeorological data analysis"
~20:15|Daniel Kirsch ([@kirel](https://twitter.com/kirel)): "Analyzing children's relay times for fun and... gold medals"
afterwards|socializing & networking
22:00|doors close

```{r initialize, echo = FALSE, message = FALSE, cache = FALSE}
# initialize libraries
suppressMessages(library(slidify))
suppressMessages(library(googlesheets))
suppressMessages(library(ggplot2))
suppressMessages(library(grid))
suppressMessages(library(jpeg))
suppressMessages(library(dplyr))
suppressMessages(library(png))
suppressMessages(library(readr))
suppressMessages(library(reshape2))
suppressMessages(library(stringr))


# survey data from Google Sheet
## download data
surveyRaw <- gs_key("1fpPQSD1hV15Rh5SiyyBhwePIBK0hIGWzvVyWGwvMiiM")
survey <- surveyRaw %>% 
    gs_read(ws = "Form Responses 1")
## extract original questions and make pretty
questions <- names(survey) %>% 
    gsub("\\.", " ", .) %>% 
    gsub("I ([dm].)", "I'\\1", .) %>% 
    gsub("    ", " ...", .)
## reorder questions
## (Google Forms remembers the order the questions were created...)
qOrder <- c(1, 2, 3, 16, 8, 9, 10, 11, 24, 25, 
            20, 21, 22, 14, 15, 18, 4, 5, 6, 23, 
            7, 12, 13, 17, 19)
survey <- survey %>% 
    select(qOrder)
questions <- questions[qOrder]
## generate generic question labels Q01..Q25
names(survey) <- c(paste0(rep("Q", 25), 
                        sprintf("%02d", seq(1:25))))


# group stats from meetup.com
# (currently the user stats are not downloadable automatically)
# (also, while the file has an .XLS extension it's actually a horribly 
#  formatted .TSV!)
## download and preprocess
memberStats <- read_tsv("../Berlin_R_Users_Group_Total_and_Active_Members.xls", 
                  col_types = "ccc") %>% 
    rename(date = `Date `, 
           total = `Total Members `, 
           active = `Active Members`) %>% 
    mutate(date = str_trim(date), 
           date = as.Date(date, format = "%Y-%m-%d"), 
           total = str_trim(total), 
           total = as.integer(total), 
           active = as.integer(active)) %>% 
    filter(!is.na(date))
## extract highest membership data
maxMembers <- data.frame(
    date = memberStats$date[which.max(memberStats$total)], 
    members = c(max(memberStats$total))
)
## combine total and active membership data
memberStats <- melt(memberStats, 
                    id.vars = "date", 
                    value.name = "members", 
                    variable.name = "status")
## create milestones
milestones <- data.frame(
    date = as.Date(c("2015-01-05", 
                     "2015-05-04", 
                     "2015-05-10", 
                     "2015-05-29"), 
                   format = "%Y-%m-%d"), 
    event = c("group founded", 
              "leadership changed", 
              "reboot announced\n@BerlinRUG started", 
              "first meetup scheduled"), 
    stringsAsFactors = FALSE
)
```

--- .class #id &twocol

## Our group sponsors

*** =left

```{r leftSponsor, echo = FALSE, cache = FALSE, fig.width = 6, fig.height = 6}
img <- readJPEG("./assets/img/RAlogo.jpg")
grid.raster(img)
```

*** =right

```{r rightSponsor, echo = FALSE, cache = FALSE, fig.width = 6, fig.height = 6}
img <- readPNG("./assets/img/MSlogo.png")
grid.raster(img)
```


--- .class #id 

## Number of group members

```{r groupStats, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, dev.args = list(bg = 'transparent')}
## member stats
ggplot(data = memberStats) + 
    geom_line(aes(x = date, 
                  y = members, 
                  group = status, 
                  color = status)) + 
    scale_color_brewer(palette = "Set1") + 
    labs(list(x = "", 
              y = "Members", 
              color = "Member status")) + 
    geom_vline(aes(xintercept = as.numeric(date)), 
               data = milestones, 
               linetype = "dashed") + 
    geom_text(aes(x = date, 
                  y = 100, 
                  label = event), 
              data = milestones, 
              angle = 90, 
              vjust = 1, 
              hjust = 1, 
              size = 4) + 
    geom_point(aes(x = date, 
                   y = members), 
               data = maxMembers, 
               size = 3) + 
    theme_bw(base_size = 25) + 
    theme(panel.border = element_blank(), 
          plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          legend.key = element_rect(color = NA), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id 

## Ratio of meetup attendance registration

```{r attendanceStatsA, echo = FALSE, message = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## attendance stats
## (unfortunately the number of attendees needs to be entered and updated 
##  manually)
attendees <- 92
totalMembers <- memberStats %>% 
    filter(status == "total") %>% 
    arrange(desc(date)) %>% 
    top_n(n = 1) %>% 
    select(members) %>% 
    collect %>% 
    .[["members"]]
```

#### (Source: meetup.com, current number of group members = ```r totalMembers```)

```{r attendanceStatsB, echo = FALSE, message = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
attendeeStats <- data.frame(
    status = factor(c("attending", 
                      "not attending"), 
                    levels = c("attending", 
                               "not attending")), 
    ratio = c(attendees / totalMembers, 
              1 - (attendees / totalMembers))
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = attendeeStats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "I'd go to a group meeting""

```{r surveyQ05A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q05: I'd go to a group meeting
n <- sum(!is.na(survey$Q05))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ05B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q05Stats <- data.frame(
    status = factor(c("yes", 
                      "maybe", 
                      "no"), 
                    levels = c("yes", 
                               "maybe", 
                               "no")), 
    ratio = c(sum(survey$Q05 == "yes", na.rm = TRUE) / n, 
              sum(survey$Q05 == "maybe", na.rm = TRUE) / n, 
              sum(survey$Q05 == "no", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q05Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "I would present something myself one day"

```{r surveyQ07A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q07: I would present something myself one day
n <- sum(!is.na(survey$Q07))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ07B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q07Stats <- data.frame(
    status = factor(c("yes", 
                      "no"), 
                    levels = c("yes", 
                               "no")), 
    ratio = c(sum(survey$Q07 == "yes", na.rm = TRUE) / n, 
              sum(survey$Q07 == "no", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q07Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "I'd like to have the talks at the meetings be recorded"

```{r surveyQ09A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q09: I'd like to have the talks at the meetings be recorded
n <- sum(!is.na(survey$Q09))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ09B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q09Stats <- data.frame(
    status = factor(c("yes", 
                      "no"), 
                    levels = c("yes", 
                               "no")), 
    ratio = c(sum(survey$Q09 == "Yes", na.rm = TRUE) / n, 
              sum(survey$Q09 == "No", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q09Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "I'd like to have the talks at the meetings be live streamed"

```{r surveyQ10A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q10: I'd like to have the talks at the meetings be live streamed
n <- sum(!is.na(survey$Q10))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ10B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q10Stats <- data.frame(
    status = factor(c("yes", 
                      "no"), 
                    levels = c("yes", 
                               "no")), 
    ratio = c(sum(survey$Q10 == "Yes", na.rm = TRUE) / n, 
              sum(survey$Q10 == "No", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q10Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "Group meetings would work best for me on ..."

```{r surveyQ11A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q11: Group meetings would work best for me on ...
n <- sum(!is.na(survey$Q11))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ11B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## multiple choices have to be accounted for
q11Stats <- unlist(strsplit(survey$Q11, split=", ")) %>% 
    table() %>% 
    as.data.frame()
names(q11Stats) <- c("status", "count")
q11Stats$status <- factor(q11Stats$status, 
                          levels = q11Stats$status)
ggplot(data = q11Stats) + 
    geom_bar(aes(x = reorder(status, count), 
                 y = count, 
                 fill = factor(status)), 
             stat = "identity") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    coord_flip() + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.ticks.y = element_blank(), 
          axis.title.y = element_blank(), 
          legend.position="none")
```

--- .class #id

## "Group meeting should start ..."

```{r surveyQ12A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q12: Group meeting should start ...
n <- sum(!is.na(survey$Q12))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ12B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q12Stats <- data.frame(
    status = factor(c("... around 5pm", 
                      "... around 6pm", 
                      "... around 7pm", 
                      "... around 8pm", 
                      "... around 9pm", 
                      "Other"), 
                    levels = c("... around 5pm", 
                               "... around 6pm", 
                               "... around 7pm", 
                               "... around 8pm", 
                               "... around 9pm", 
                               "Other")), 
    ratio = c(sum(survey$Q12 == "... around 5pm", na.rm = TRUE) / n, 
              sum(survey$Q12 == "... around 6pm", na.rm = TRUE) / n, 
              sum(survey$Q12 == "... around 7pm", na.rm = TRUE) / n, 
              sum(survey$Q12 == "... around 8pm", na.rm = TRUE) / n, 
              sum(survey$Q12 == "... around 9pm", na.rm = TRUE) / n, 
              sum(survey$Q12 == "Other", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q12Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "Group meetings should be ..."

```{r surveyQ13A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q13: Group meetings should be ...
n <- sum(!is.na(survey$Q13))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ13B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q13Stats <- data.frame(
    status = factor(c("... weekly", 
                      "... bi-weekly", 
                      "... once a month", 
                      "... every other month", 
                      "Other"), 
                    levels = c("... weekly", 
                               "... bi-weekly", 
                               "... once a month", 
                               "... every other month", 
                               "Other")), 
    ratio = c(sum(survey$Q13 == "... weekly", na.rm = TRUE) / n, 
              sum(survey$Q13 == "... bi-weekly", na.rm = TRUE) / n, 
              sum(survey$Q13 == "... once a month", na.rm = TRUE) / n, 
              sum(survey$Q13 == "... every other month", na.rm = TRUE) / n, 
              sum(survey$Q13 == "Other", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q13Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "Group meetings would be most interesting for me if ..."

```{r surveyQ06A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q06: Group meetings would be most interesting for me if ...
n <- sum(!is.na(survey$Q06))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ06B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## multiple choices have to be accounted for
q06Stats <- unlist(strsplit(survey$Q06, split=", ")) %>% 
    table() %>% 
    as.data.frame()
names(q06Stats) <- c("status", "count")
q06Stats$status <- factor(q06Stats$status, 
                          levels = q06Stats$status)
ggplot(data = q06Stats) + 
    geom_bar(aes(x = reorder(status, count), 
                 y = count, 
                 fill = factor(status)), 
             stat = "identity") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    coord_flip() + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.ticks.y = element_blank(), 
          axis.title.y = element_blank(), 
          legend.position="none")
```

--- .class #id

## "My field of work/research"

```{r surveyQ21A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q21: My field of work/research
n <- sum(!is.na(survey$Q21))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ21B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## multiple choices have to be accounted for
q21Stats <- unlist(strsplit(survey$Q21, split=", ")) %>% 
    table() %>% 
    as.data.frame()
names(q21Stats) <- c("status", "count")
q21Stats$status <- factor(q21Stats$status, 
                          levels = q21Stats$status)
ggplot(data = q21Stats) + 
    geom_bar(aes(x = reorder(status, count), 
                 y = count, 
                 fill = factor(status)), 
             stat = "identity") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    coord_flip() + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.ticks.y = element_blank(), 
          axis.title.y = element_blank(), 
          legend.position="none")
```

--- .class #id

## "I'm ..."

```{r surveyQ20A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q20: I'm ...
n <- sum(!is.na(survey$Q20))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ20B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q20Stats <- data.frame(
    status = factor(c("... an employee", 
                      "... self-employed", 
                      "... a researcher", 
                      "... a student", 
                      "... looking for a job"), 
                    levels = c("... an employee", 
                               "... self-employed", 
                               "... a researcher", 
                               "... a student", 
                               "... looking for a job")), 
    ratio = c(sum(survey$Q20 == "... an employee", na.rm = TRUE) / n, 
              sum(survey$Q20 == "... self-employed", na.rm = TRUE) / n, 
              sum(survey$Q20 == "... a researcher", na.rm = TRUE) / n, 
              sum(survey$Q20 == "... a student", na.rm = TRUE) / n, 
              sum(survey$Q20 == "... looking for a job", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q20Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "I'm using R ..."

```{r surveyQ03A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q03: I'm using R ...
n <- sum(!is.na(survey$Q03))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ03B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## multiple choices have to be accounted for
q03Stats <- unlist(strsplit(survey$Q03, split=", ")) %>% 
    table() %>% 
    as.data.frame()
names(q03Stats) <- c("status", "count")
q03Stats$status <- factor(q03Stats$status, 
                          levels = q03Stats$status)
ggplot(data = q03Stats) + 
    geom_bar(aes(x = reorder(status, count), 
                 y = count, 
                 fill = factor(status)), 
             stat = "identity") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    coord_flip() + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.ticks.y = element_blank(), 
          axis.title.y = element_blank(), 
          legend.position="none")
```

--- .class #id 

## "My R proficiency level"

```{r surveyQ02, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q02: My R proficiency level
n <- sum(!is.na(survey$Q02))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ02B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q02Stats <- data.frame(
    status = factor(c("absolute pro", 
                      "advanced", 
                      "intermediate", 
                      "total newbie", 
                      "never used it"), 
                    levels = c("absolute pro", 
                               "advanced", 
                               "intermediate", 
                               "total newbie", 
                               "never used it")), 
    ratio = c(sum(survey$Q02 == "absolute pro", na.rm = TRUE) / n, 
              sum(survey$Q02 == "advanced", na.rm = TRUE) / n, 
              sum(survey$Q02 == "intermediate", na.rm = TRUE) / n, 
              sum(survey$Q02 == "total newbie", na.rm = TRUE) / n, 
              sum(survey$Q02 == "never used it", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q02Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "My highest degree"

```{r surveyQ19A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q19: My highest degree
n <- sum(!is.na(survey$Q19))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ19B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q19Stats <- data.frame(
    status = factor(c("none", 
                      "high-school", 
                      "undergraduate", 
                      "graduate", 
                      "PhD", 
                      "Other"), 
                    levels = c("none", 
                               "high-school", 
                               "undergraduate", 
                               "graduate", 
                               "PhD", 
                               "Other")), 
    ratio = c(sum(survey$Q19 == "none", na.rm = TRUE) / n, 
              sum(survey$Q19 == "high-school", na.rm = TRUE) / n, 
              sum(survey$Q19 == "undergraduate", na.rm = TRUE) / n, 
              sum(survey$Q19 == "graduate", na.rm = TRUE) / n, 
              sum(survey$Q19 == "PhD", na.rm = TRUE) / n, 
              sum(survey$Q19 == "Other", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q19Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "My english proficiency"

```{r surveyQ22A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q22: My english proficiency
n <- sum(!is.na(survey$Q22))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ22B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q22Stats <- data.frame(
    status = factor(c("none", 
                      "basic", 
                      "intermediate", 
                      "advanced", 
                      "fluent / native"), 
                    levels = c("none", 
                      "basic", 
                      "intermediate", 
                      "advanced", 
                      "fluent / native")), 
    ratio = c(sum(survey$Q22 == "none (how did you make it that far in the questionnaire?)", na.rm = TRUE) / n, 
              sum(survey$Q22 == "basic", na.rm = TRUE) / n, 
              sum(survey$Q22 == "intermediate", na.rm = TRUE) / n, 
              sum(survey$Q22 == "advanced", na.rm = TRUE) / n, 
              sum(survey$Q22 == "fluent / native", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q22Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "My other language skills"

```{r surveyQ23A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q23: My other language skills
n <- sum(!is.na(survey$Q23))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ23B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## multiple choices have to be accounted for
q23Stats <- unlist(strsplit(survey$Q23, split=", ")) %>% 
    table() %>% 
    as.data.frame()
names(q23Stats) <- c("status", "count")
q23Stats$status <- factor(q23Stats$status, 
                          levels = q23Stats$status)
ggplot(data = q23Stats) + 
    geom_bar(aes(x = reorder(status, count), 
                 y = count, 
                 fill = factor(status)), 
             stat = "identity") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    coord_flip() + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.ticks.y = element_blank(), 
          axis.title.y = element_blank(), 
          legend.position="none")
```

--- .class #id

## "I have been living in Berlin ..."

```{r surveyQ24A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q24: I have been living in Berlin ...
n <- sum(!is.na(survey$Q24))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ24B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q24Stats <- data.frame(
    status = factor(c("... since I was born", 
                      "... more than five years now", 
                      "... less than five but more than a year now", 
                      "... less than a year", 
                      "... I only just arrived", 
                      "Other"), 
                    levels = c("... since I was born", 
                               "... more than five years now", 
                               "... less than five but more than a year now", 
                               "... less than a year", 
                               "... I only just arrived", 
                               "Other")), 
    ratio = c(sum(survey$Q24 == "... since I was born", na.rm = TRUE) / n, 
              sum(survey$Q24 == "... more than five years now", na.rm = TRUE) / n, 
              sum(survey$Q24 == "... less than five but more than a year now", na.rm = TRUE) / n, 
              sum(survey$Q24 == "... less than a year", na.rm = TRUE) / n, 
              sum(survey$Q24 == "... I only just arrived", na.rm = TRUE) / n, 
              sum(survey$Q24 == "Other", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q24Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## You are the group - the group is you!
##### (image credit: [Peter O'Connor aka anemoneprojectors on Flickr](https://flic.kr/p/9GEQsk))

```{r groupImage, echo = FALSE, message = FALSE, cache = FALSE, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
jpegUrl <- "https://farm3.staticflickr.com/2588/5711091239_edae823037_o_d.jpg"
tf <- tempfile()
download.file(jpegUrl, 
              tf, 
              method = "curl")
img <- readJPEG(tf)
grid.raster(img)
invisible(file.remove(tf))
```

--- .class #id 

## Contact

* Group website on Meetup.com: [http://www.meetup.com/Berlin-R-Users-Group/](http://www.meetup.com/Berlin-R-Users-Group/)
* Twitter: [@BerlinRUG](https://twitter.com/berlinrug)
* Konstantin: [@kogreger](https://twitter.com/kogreger) or [kogreger@gmail.com](mailto:kogreger@gmail.com)
* Member Survey: [http://bit.ly/BerlinRUG_Member_Survey](http://bit.ly/BerlinRUG_Member_Survey) (so far 46 hits, 34 submitted)
* These slides are available on my [GitHub repository ```berlinrug_introduction```](https://github.com/kogreger/berlinrug_introduction)

--- .class #id 

## Start
##### (image credit: [Dirk Vorderstra√üe on Flickr](https://flic.kr/p/h8fWVM))

```{r startImage, echo = FALSE, message = FALSE, cache = FALSE, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
jpegUrl <- "https://farm4.staticflickr.com/3698/10583840103_c656504a75_b_d.jpg"
tf <- tempfile()
download.file(jpegUrl, 
              tf, 
              method = "curl")
img <- readJPEG(tf)
grid.raster(img)
invisible(file.remove(tf))
```

--- .class #id 

## Schedule for today

Time|What's happening
-------|-------
19:00|doors open
19:30|Konstantin Greger ([@kogreger](https://twitter.com/kogreger)): "Welcome address and brief group introduction"
~19:45|Berry Boessenkool (Universit√§t Potsdam, [@berryboessenkoo](https://twitter.com/berryboessenkoo)): "Why you need an umbrella on hot days - R application in hydrometeorological data analysis"
~20:15|Daniel Kirsch ([@kirel](https://twitter.com/kirel)): "Analyzing children's relay times for fun and... gold medals"
afterwards|socializing & networking
22:00|doors close

--- .class #id 

## Backup slides

--- .class #id

## "My gender"

```{r surveyQ17A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q17: My gender
n <- sum(!is.na(survey$Q17))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ17B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q17Stats <- data.frame(
    status = factor(c("female", 
                      "male", 
                      "other"), 
                    levels = c("female", 
                               "male", 
                               "other")), 
    ratio = c(sum(survey$Q17 == "female", na.rm = TRUE) / n, 
              sum(survey$Q17 == "male", na.rm = TRUE) / n, 
              sum(survey$Q17 == "Other", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q17Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```

--- .class #id

## "My age"

```{r surveyQ18A, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
## Q18: My age
n <- sum(!is.na(survey$Q18))
```

#### (Source: BerlinRUG member survey, n = ```r n```)

```{r surveyQ18B, echo = FALSE, cache = FALSE, dpi = 72, fig.width = 14, fig.height = 7, fit.align = "center", dev.args = list(bg = 'transparent')}
q18Stats <- data.frame(
    status = factor(c("(0, 18)", 
                      "[18, 25)", 
                      "[25, 35)", 
                      "[35, 45)", 
                      "[45, 55)", 
                      "[55, 65)", 
                      "[65, Inf)"), 
                    levels = c("(0, 18)", 
                               "[18, 25)", 
                               "[25, 35)", 
                               "[35, 45)", 
                               "[45, 55)", 
                               "[55, 65)", 
                               "[65, Inf)")), 
    ratio = c(sum(survey$Q18 == "(0, 18)", na.rm = TRUE) / n, 
              sum(survey$Q18 == "[18, 25)", na.rm = TRUE) / n, 
              sum(survey$Q18 == "[25, 35)", na.rm = TRUE) / n, 
              sum(survey$Q18 == "[35, 45)", na.rm = TRUE) / n, 
              sum(survey$Q18 == "[45, 55)", na.rm = TRUE) / n, 
              sum(survey$Q18 == "[55, 65)", na.rm = TRUE) / n, 
              sum(survey$Q18 == "[65, Inf)", na.rm = TRUE) / n)
) %>% 
    mutate(pos = cumsum(ratio)- ratio / 2)
ggplot(data = q18Stats) + 
    geom_bar(aes(x = factor(1), 
                 y = ratio, 
                 fill = factor(status)), 
             stat = "identity", 
             width = 1) + 
    scale_fill_brewer(palette = "Set1") + 
    geom_text(aes(x = factor(1), 
                  y = pos, 
                  label = paste0(round(ratio * 100, 0), "%")), 
              size = 8, 
              color = "white") + 
    coord_polar(theta="y") + 
    labs(list(x = "", 
              y = "", 
              fill = "")) + 
    theme_bw(base_size = 25) + 
    theme(plot.background = element_rect(fill = "transparent", 
                                         color = NA), 
          panel.background = element_rect(fill = "transparent", 
                                          color = NA), 
          panel.border = element_blank(), 
          panel.grid.major = element_blank(), 
          axis.line = element_blank(), 
          axis.text.x = element_blank(), 
          axis.text.y = element_blank(), 
          axis.ticks = element_blank(), 
          axis.title.x = element_blank(), 
          axis.title.y = element_blank(), 
          legend.key.size = unit(2, "lines"))
```
